!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ThreeSixty=e():t.ThreeSixty=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),function(t){e.default=class{constructor(t,e){this.container=t,this.options=Object.assign({width:300,height:300,count:0,perRow:0,speed:100,dragTolerance:10,swipeTolerance:10,draggable:!0,swipeable:!0,keys:!0,prev:!0,next:!0,inverted:!1},e),this.options.swipeTarget=this.options.swipeTarget||this.container,this.sprite=!Array.isArray(this.options.image),this.sprite||(this.options.count=this.options.image.length),this.index=0,this.loopTimeoutId=null,this.looping=!1,this.dragOrigin=null,this.eventHandlers={container:{mousedown:t=>this.dragOrigin=t.pageX,touchstart:t=>this.dragOrigin=t.touches[0].clientX,touchend:()=>this.dragOrigin=null},prev:{mousedown:t=>{t.preventDefault(),this.play(!0)},mouseup:t=>{t.preventDefault(),this.stop()},touchstart:t=>{t.preventDefault(),this.prev()}},next:{mousedown:t=>{t.preventDefault(),this.play()},mouseup:t=>{t.preventDefault(),this.stop()},touchstart:t=>{t.preventDefault(),this.next()}},global:{mouseup:()=>this.dragOrigin=null,mousemove:t=>{this.dragOrigin&&Math.abs(this.dragOrigin-t.pageX)>this.options.dragTolerance&&(this.stop(),this.dragOrigin>t.pageX?this.prev():this.next(),this.dragOrigin=t.pageX)},touchmove:t=>{this.dragOrigin&&Math.abs(this.dragOrigin-t.touches[0].clientX)>this.options.swipeTolerance&&(this.stop(),this.dragOrigin>t.touches[0].clientX?this.prev():this.next(),this.dragOrigin=t.touches[0].clientX)},keydown:t=>{[37,39].includes(t.keyCode)&&this.play(37===t.keyCode)},keyup:t=>{[37,39].includes(t.keyCode)&&self.stop()}}},this.initContainer(),this.initEvents()}initContainer(){this.container.style.width=this.options.width+"px",this.container.style.height=this.options.height+"px",this.sprite&&(this.container.style.backgroundImage=`url("${this.options.image}")`,this.container.style.backgroundSize=100*this.options.perRow+"%"),this.update()}initEvents(){this.options.draggable&&(this.options.swipeTarget.addEventListener("mousedown",this.eventHandlers.container.mousedown),t.addEventListener("mouseup",this.eventHandlers.global.mouseup),t.addEventListener("mousemove",this.eventHandlers.global.mousemove)),this.options.swipeable&&(this.options.swipeTarget.addEventListener("touchstart",this.eventHandlers.container.touchstart),this.options.swipeTarget.addEventListener("touchend",this.eventHandlers.container.touchend),t.addEventListener("touchmove",this.eventHandlers.global.touchmove)),this.options.keys&&(t.addEventListener("keydown",this.eventHandlers.global.keydown),t.addEventListener("keyup",this.eventHandlers.global.keyup)),this.options.prev&&(this.options.prev.addEventListener("mousedown",this.eventHandlers.prev.mousedown),this.options.prev.addEventListener("mouseup",this.eventHandlers.prev.mouseup),this.options.prev.addEventListener("touchstart",this.eventHandlers.prev.touchstart)),this.options.next&&(this.options.next.addEventListener("mousedown",this.eventHandlers.next.mousedown),this.options.next.addEventListener("mouseup",this.eventHandlers.next.mouseup),this.options.next.addEventListener("touchstart",this.eventHandlers.next.touchstart))}next(){this.goto(this.options.inverted?this.index+1:this.index-1)}prev(){this.goto(this.options.inverted?this.index-1:this.index+1)}goto(t){this.index=(this.options.count+t)%this.options.count,this.update()}loop(e){e?this.prev():this.next(),this.loopTimeoutId=t.setTimeout(()=>{this.loop(e)},this.options.speed)}play(t){this.looping||(this.loop(t),this.looping=!0)}stop(){this.looping&&(t.clearTimeout(this.loopTimeoutId),this.looping=!1)}update(){this.sprite?(this.container.style.backgroundPositionX=-this.index%this.options.perRow*this.options.width+"px",this.container.style.backgroundPositionY=-Math.floor(this.index/this.options.perRow)*this.options.height+"px"):this.container.style.backgroundImage=`url("${this.options.image[this.index]}")`}destroy(){this.stop(),this.options.swipeTarget.removeEventListener("mousedown",this.eventHandlers.container.mousedown),this.options.swipeTarget.removeEventListener("touchstart",this.eventHandlers.container.touchstart),this.options.swipeTarget.removeEventListener("touchend",this.eventHandlers.container.touchend),t.removeEventListener("mouseup",this.eventHandlers.global.mouseup),t.removeEventListener("mousemove",this.eventHandlers.global.mousemove),t.removeEventListener("touchmove",this.eventHandlers.global.touchmove),t.removeEventListener("keydown",this.eventHandlers.global.keydown),t.removeEventListener("keyup",this.eventHandlers.global.keyup),this.options.prev&&(this.options.prev.removeEventListener("mousedown",this.eventHandlers.prev.mousedown),this.options.prev.removeEventListener("mouseup",this.eventHandlers.prev.mouseup),this.options.prev.removeEventListener("touchstart",this.eventHandlers.prev.touchstart)),this.options.next&&(this.options.next.removeEventListener("mousedown",this.eventHandlers.next.mousedown),this.options.next.removeEventListener("mouseup",this.eventHandlers.next.mouseup),this.options.next.removeEventListener("touchstart",this.eventHandlers.next.touchstart)),this.container.style.width="",this.container.style.height="",this.container.style.backgroundImage="",this.container.style.backgroundPosition="",this.container.style.backgroundSize=""}}}.call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}]).default});