!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ThreeSixty=t():e.ThreeSixty=t()}(window,function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t),function(e){function s(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");var s=t.get(e);return s.get?s.get.call(e):s.value}function n(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");var n=t.get(e);if(n.set)n.set.call(e,s);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}return s}var i=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap;t.default=class{constructor(e,t){i.set(this,{writable:!0,value:0}),o.set(this,{writable:!0,value:null}),r.set(this,{writable:!0,value:null}),a.set(this,{writable:!0,value:!1}),this.container=e,this.options=Object.assign({width:300,height:300,count:0,perRow:0,speed:100,dragTolerance:10,swipeTolerance:10,draggable:!0,swipeable:!0,keys:!0,inverted:!1},t),this.options.swipeTarget=this.options.swipeTarget||this.container,this.sprite=!Array.isArray(this.options.image),this.sprite||(this.options.count=this.options.image.length),this.eventHandlers={container:{mousedown:e=>n(this,o,e.pageX),touchstart:e=>n(this,o,e.touches[0].clientX),touchend:()=>n(this,o,null)},prev:{mousedown:e=>{e.preventDefault(),this.play(!0)},mouseup:e=>{e.preventDefault(),this.stop()},touchstart:e=>{e.preventDefault(),this.prev()}},next:{mousedown:e=>{e.preventDefault(),this.play()},mouseup:e=>{e.preventDefault(),this.stop()},touchstart:e=>{e.preventDefault(),this.next()}},global:{mouseup:()=>n(this,o,null),mousemove:e=>{s(this,o)&&Math.abs(s(this,o)-e.pageX)>this.options.dragTolerance&&(this.stop(),s(this,o)>e.pageX?this.prev():this.next(),n(this,o,e.pageX))},touchmove:e=>{s(this,o)&&Math.abs(s(this,o)-e.touches[0].clientX)>this.options.swipeTolerance&&(this.stop(),s(this,o)>e.touches[0].clientX?this.prev():this.next(),n(this,o,e.touches[0].clientX))},keydown:e=>{[37,39].includes(e.keyCode)&&this.play(37===e.keyCode)},keyup:e=>{[37,39].includes(e.keyCode)&&self.stop()}}},this.initContainer(),this.initEvents()}initContainer(){this.container.style.width=this.options.width+"px",this.container.style.height=this.options.height+"px",this.sprite&&(this.container.style.backgroundImage=`url("${this.options.image}")`,this.container.style.backgroundSize=100*this.options.perRow+"%"),this.update()}initEvents(){this.options.draggable&&(this.options.swipeTarget.addEventListener("mousedown",this.eventHandlers.container.mousedown),e.addEventListener("mouseup",this.eventHandlers.global.mouseup),e.addEventListener("mousemove",this.eventHandlers.global.mousemove)),this.options.swipeable&&(this.options.swipeTarget.addEventListener("touchstart",this.eventHandlers.container.touchstart),this.options.swipeTarget.addEventListener("touchend",this.eventHandlers.container.touchend),e.addEventListener("touchmove",this.eventHandlers.global.touchmove)),this.options.keys&&(e.addEventListener("keydown",this.eventHandlers.global.keydown),e.addEventListener("keyup",this.eventHandlers.global.keyup)),this.options.prev&&(this.options.prev.addEventListener("mousedown",this.eventHandlers.prev.mousedown),this.options.prev.addEventListener("mouseup",this.eventHandlers.prev.mouseup),this.options.prev.addEventListener("touchstart",this.eventHandlers.prev.touchstart)),this.options.next&&(this.options.next.addEventListener("mousedown",this.eventHandlers.next.mousedown),this.options.next.addEventListener("mouseup",this.eventHandlers.next.mouseup),this.options.next.addEventListener("touchstart",this.eventHandlers.next.touchstart))}get index(){return s(this,i)}next(){this.goto(this.options.inverted?s(this,i)-1:s(this,i)+1)}prev(){this.goto(this.options.inverted?s(this,i)+1:s(this,i)-1)}goto(e){n(this,i,(this.options.count+e)%this.options.count),this.update()}loop(t){t?this.prev():this.next(),n(this,r,e.setTimeout(()=>{this.loop(t)},this.options.speed))}play(e){s(this,a)||(this.loop(e),n(this,a,!0))}stop(){s(this,a)&&(e.clearTimeout(s(this,r)),n(this,a,!1))}update(){this.sprite?(this.container.style.backgroundPositionX=-s(this,i)%this.options.perRow*this.options.width+"px",this.container.style.backgroundPositionY=-Math.floor(s(this,i)/this.options.perRow)*this.options.height+"px"):this.container.style.backgroundImage=`url("${this.options.image[s(this,i)]}")`}destroy(){this.stop(),this.options.swipeTarget.removeEventListener("mousedown",this.eventHandlers.container.mousedown),this.options.swipeTarget.removeEventListener("touchstart",this.eventHandlers.container.touchstart),this.options.swipeTarget.removeEventListener("touchend",this.eventHandlers.container.touchend),e.removeEventListener("mouseup",this.eventHandlers.global.mouseup),e.removeEventListener("mousemove",this.eventHandlers.global.mousemove),e.removeEventListener("touchmove",this.eventHandlers.global.touchmove),e.removeEventListener("keydown",this.eventHandlers.global.keydown),e.removeEventListener("keyup",this.eventHandlers.global.keyup),this.options.prev&&(this.options.prev.removeEventListener("mousedown",this.eventHandlers.prev.mousedown),this.options.prev.removeEventListener("mouseup",this.eventHandlers.prev.mouseup),this.options.prev.removeEventListener("touchstart",this.eventHandlers.prev.touchstart)),this.options.next&&(this.options.next.removeEventListener("mousedown",this.eventHandlers.next.mousedown),this.options.next.removeEventListener("mouseup",this.eventHandlers.next.mouseup),this.options.next.removeEventListener("touchstart",this.eventHandlers.next.touchstart)),this.container.style.width="",this.container.style.height="",this.container.style.backgroundImage="",this.container.style.backgroundPosition="",this.container.style.backgroundSize=""}}}.call(this,s(1))},function(e,t){var s;s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(s=window)}e.exports=s}]).default});